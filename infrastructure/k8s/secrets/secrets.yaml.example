# Kubernetes Secrets Template
# Feature: 005-oke-dapr-kafka-infra
# Task: T053
#
# IMPORTANT: Never commit actual secret values to git!
# Copy this file to secrets.yaml and fill in actual values.
# Add secrets.yaml to .gitignore
#
# Apply secrets: kubectl apply -f infrastructure/k8s/secrets/secrets.yaml

---
# =============================================================================
# Database Credentials
# =============================================================================
apiVersion: v1
kind: Secret
metadata:
  name: db-credentials
  namespace: todo-app
  labels:
    app.kubernetes.io/name: todo-app
    app.kubernetes.io/component: database
type: Opaque
stringData:
  # PostgreSQL connection string
  # Format: postgresql://user:password@host:port/database
  connection-string: "postgresql://todo_user:CHANGE_ME@db-host:5432/todo_db"
  # Individual components (if needed)
  db-host: "db-host"
  db-port: "5432"
  db-name: "todo_db"
  db-user: "todo_user"
  db-password: "CHANGE_ME"

---
# =============================================================================
# AI API Key (Cohere)
# =============================================================================
apiVersion: v1
kind: Secret
metadata:
  name: cohere-api-key
  namespace: todo-app
  labels:
    app.kubernetes.io/name: todo-app
    app.kubernetes.io/component: ai
type: Opaque
stringData:
  api-key: "CHANGE_ME_COHERE_API_KEY"

---
# =============================================================================
# JWT Secret Key
# =============================================================================
apiVersion: v1
kind: Secret
metadata:
  name: jwt-secret
  namespace: todo-app
  labels:
    app.kubernetes.io/name: todo-app
    app.kubernetes.io/component: auth
type: Opaque
stringData:
  # Generate with: openssl rand -base64 32
  secret-key: "CHANGE_ME_JWT_SECRET_KEY"

---
# =============================================================================
# OCIR Docker Registry Secret
# =============================================================================
# Create with:
# kubectl create secret docker-registry ocir-secret \
#   --namespace todo-app \
#   --docker-server=<region>.ocir.io \
#   --docker-username='<tenancy-namespace>/<username>' \
#   --docker-password='<auth-token>' \
#   --docker-email='<email>'
#
# Or use this template:
apiVersion: v1
kind: Secret
metadata:
  name: ocir-secret
  namespace: todo-app
  labels:
    app.kubernetes.io/name: todo-app
    app.kubernetes.io/component: registry
type: kubernetes.io/dockerconfigjson
data:
  # Base64 encoded docker config JSON
  # Generate with: echo '{"auths":{"<region>.ocir.io":{"username":"<tenancy>/<user>","password":"<token>","email":"<email>"}}}' | base64
  .dockerconfigjson: "CHANGE_ME_BASE64_ENCODED_DOCKER_CONFIG"

---
# =============================================================================
# TLS Certificate Secret (for HTTPS)
# =============================================================================
# Create with cert-manager or manually:
# kubectl create secret tls todo-tls-secret \
#   --namespace todo-app \
#   --cert=path/to/tls.crt \
#   --key=path/to/tls.key
#
# Or use this template:
# apiVersion: v1
# kind: Secret
# metadata:
#   name: todo-tls-secret
#   namespace: todo-app
# type: kubernetes.io/tls
# data:
#   tls.crt: "BASE64_ENCODED_CERTIFICATE"
#   tls.key: "BASE64_ENCODED_PRIVATE_KEY"
